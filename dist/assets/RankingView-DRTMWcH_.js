import{d as N,r as R,c as m,o as B,b as n,e as s,g as r,h as D,i as d,F as p,f as v,I as E,n as S,t as l,l as I,m as i,_ as $}from"./index-CD-uQSen.js";import{u as z}from"./comic-BkiLk8d2.js";const L={class:"ranking-view"},U={class:"ranking-tabs"},j={class:"ranking-list"},q={key:0,class:"loading-container"},A={key:1},G=["onClick"],H={class:"comic-cover"},J=["src","alt"],K={class:"comic-info"},O={class:"comic-title"},P={class:"comic-tags"},Q={class:"comic-meta"},W={class:"comic-author"},X={class:"comic-rating"},Y={class:"rating-value"},Z={class:"comic-description"},ee=N({__name:"RankingView",setup(te){const k=I(),u=z(),c=R("popular"),b=m(()=>u.loading),w=m(()=>u.comics),C=m(()=>{const a=[...w.value];switch(a.forEach(e=>{e.views||(e.views=Math.floor(Math.random()*1e4)),e.rating||(e.rating=(Math.random()*4+1).toFixed(1)),e.favorites||(e.favorites=Math.floor(Math.random()*5e3))}),c.value){case"popular":return a.sort((e,o)=>(o.views||0)-(e.views||0)).slice(0,20);case"rating":return a.sort((e,o)=>(parseFloat(o.rating)||0)-(parseFloat(e.rating)||0)).slice(0,20);case"favorites":return a.sort((e,o)=>(o.favorites||0)-(e.favorites||0)).slice(0,20);case"updates":return a.sort((e,o)=>new Date(o.updateTime).getTime()-new Date(e.updateTime).getTime()).slice(0,20);default:return a.slice(0,20)}}),y=a=>{c.value=a},T=async()=>{try{await u.fetchComics(1,50)}catch(a){console.error("加载排行榜失败",a),E.error("加载排行榜失败")}},M=a=>{k.push(`/comic/${a}`)};return B(()=>{T()}),(a,e)=>{const o=d("el-tab-pane"),V=d("el-tabs"),x=d("el-skeleton"),F=d("el-rate");return i(),n("div",L,[e[1]||(e[1]=s("h1",{class:"page-title"},"漫画排行榜",-1)),s("div",U,[r(V,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),onTabChange:y},{default:D(()=>[r(o,{label:"热门排行",name:"popular"}),r(o,{label:"评分排行",name:"rating"}),r(o,{label:"收藏排行",name:"favorites"}),r(o,{label:"更新排行",name:"updates"})]),_:1},8,["modelValue"])]),s("div",j,[b.value?(i(),n("div",q,[(i(),n(p,null,v(10,t=>r(x,{rows:3,animated:"",key:t})),64))])):(i(),n("div",A,[(i(!0),n(p,null,v(C.value,(t,g)=>{var h,f;return i(),n("div",{class:"ranking-item",key:t.id},[s("div",{class:S(["ranking-number",{"top-three":g<3}])},l(g+1),3),s("div",{class:"ranking-comic",onClick:_=>M(t.id)},[s("div",H,[s("img",{src:t.cover,alt:t.title},null,8,J)]),s("div",K,[s("h3",O,l(t.title),1),s("div",P,[(i(!0),n(p,null,v(t.tags.slice(0,3),_=>(i(),n("span",{key:_,class:"tag"},l(_),1))),128))]),s("div",Q,[s("span",W,l(t.author),1),s("span",X,[r(F,{"model-value":Number(t.rating||0),disabled:"","text-color":"#ff9900"},null,8,["model-value"]),s("span",Y,l(Number(t.rating||0).toFixed(1)),1)])]),s("p",Z,l((h=t.description)==null?void 0:h.substring(0,100))+l(((f=t.description)==null?void 0:f.length)>100?"...":""),1)])],8,G)])}),128))]))])])}}}),oe=$(ee,[["__scopeId","data-v-220d754c"]]);export{oe as default};
