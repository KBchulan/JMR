import{d as B,c as d,x as N,w as V,o as R,b as l,g as a,h as u,i as _,F as w,e as t,p as F,n as $,t as i,f as q,l as z,q as h,m as c,_ as E}from"./index-CD-uQSen.js";import{u as L}from"./comic-BkiLk8d2.js";import{S as M}from"./SectionTitle-KoLAdueA.js";const j={class:"comic-detail"},A={key:0,class:"loading-container"},G={style:{display:"flex",gap:"20px"}},H={style:{width:"240px"}},J={style:{flex:"1"}},K={style:{display:"flex",gap:"20px",margin:"15px 0"}},O={class:"comic-info"},P={class:"comic-cover"},Q=["src","alt"],U={class:"comic-meta"},W={class:"comic-title"},X={class:"comic-tags"},Y={class:"comic-data"},Z={class:"data-item"},I={class:"value"},tt={class:"data-item"},et={class:"value"},st={class:"comic-description"},at={class:"comic-actions"},ot={key:0,class:"chapter-section"},it={class:"chapter-container"},nt={class:"chapter-title"},lt={class:"chapter-date"},ct={key:2,class:"error-container"},rt=B({__name:"ComicDetail",setup(dt){const y=N(),f=z(),p=L(),b=d(()=>p.loading),s=d(()=>p.currentComic);d(()=>p.error);const r=d(()=>!s.value||!s.value.chapters||s.value.chapters.length===0?null:s.value.chapters[0]),g=d(()=>{const o=y.params.id;return typeof o=="string"?o:o[0]});V(()=>y.params.id,o=>{if(o){const e=typeof o=="string"?o:o[0];x(e)}});async function x(o){try{await p.fetchComicDetail(o)}catch(e){console.error("加载漫画详情失败",e)}}function D(){r.value&&C(r.value)}function C(o){f.push(`/reader/${o.id}`)}function S(){f.push("/")}return R(()=>{g.value&&x(g.value)}),(o,e)=>{const n=_("el-skeleton-item"),k=_("el-skeleton"),m=_("el-button"),T=_("el-empty");return c(),l("div",j,[b.value?(c(),l("div",A,[a(k,{style:{width:"100%"},animated:""},{template:u(()=>[t("div",G,[t("div",H,[a(n,{variant:"image",style:{width:"240px",height:"320px"}})]),t("div",J,[a(n,{variant:"h1",style:{width:"50%"}}),t("div",K,[a(n,{variant:"text",style:{width:"30%"}}),a(n,{variant:"text",style:{width:"30%"}})]),a(n,{variant:"text",style:{width:"80%"}}),a(n,{variant:"text",style:{width:"80%"}}),a(n,{variant:"text",style:{width:"80%"}})])])]),_:1}),a(k,{style:{"margin-top":"40px"},rows:2,animated:""})])):s.value?(c(),l(w,{key:1},[t("div",O,[t("div",P,[t("img",{src:s.value.cover,alt:s.value.title},null,8,Q),t("div",{class:$(["comic-status",s.value.status])},i(s.value.status==="ongoing"?"连载中":"已完结"),3)]),t("div",U,[t("h1",W,i(s.value.title),1),t("div",X,[(c(!0),l(w,null,q(s.value.tags,v=>(c(),l("span",{key:v,class:"tag"},i(v),1))),128))]),t("div",Y,[t("div",Z,[e[1]||(e[1]=t("span",{class:"label"},"作者",-1)),t("span",I,i(s.value.author),1)]),t("div",tt,[e[2]||(e[2]=t("span",{class:"label"},"更新",-1)),t("span",et,i(s.value.updateTime),1)])]),t("div",st,[t("p",null,i(s.value.description),1)]),t("div",at,[a(m,{type:"primary",onClick:D},{default:u(()=>e[3]||(e[3]=[h("开始阅读")])),_:1}),a(m,{type:"info",plain:""},{default:u(()=>e[4]||(e[4]=[h("收藏")])),_:1})])])]),r.value?(c(),l("div",ot,[a(M,{title:"开始阅读"}),t("div",it,[t("div",{class:"chapter-item",onClick:e[0]||(e[0]=v=>C(r.value))},[t("span",nt,i(r.value.title),1),t("span",lt,i(r.value.updateTime),1)])])])):F("",!0)],64)):(c(),l("div",ct,[a(T,{description:"漫画不存在或已被删除"}),a(m,{type:"primary",onClick:S},{default:u(()=>e[5]||(e[5]=[h("返回首页")])),_:1})]))])}}}),mt=E(rt,[["__scopeId","data-v-5ab2e656"]]);export{mt as default};
