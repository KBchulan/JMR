import{u as k}from"./comic-BkiLk8d2.js";import{C as x}from"./ComicGrid-apJGY1A-.js";import{d as T,r as c,c as r,o as V,b as m,e as u,g,F as z,f as B,I as N,h as S,q as b,t as P,n as E,i as F,m as v,_ as I}from"./index-CD-uQSen.js";const M={class:"category-view"},q={class:"category-tags"},A=T({__name:"CategoryView",setup(D){const e=k(),o=c(1),s=c(24),d=c(0),f=r(()=>e.loading),p=r(()=>e.comics),a=c("all"),C=[{id:"all",name:"全部"},{id:"百合",name:"百合"},{id:"校园",name:"校园"},{id:"恋爱",name:"恋爱"},{id:"治愈",name:"治愈"},{id:"奇幻",name:"奇幻"},{id:"冒险",name:"冒险"},{id:"搞笑",name:"搞笑"},{id:"日常",name:"日常"}],_=t=>{a.value=t,o.value=1,i()},i=async()=>{try{a.value!=="all"?await e.fetchComicsByTag(a.value,o.value,s.value):await e.fetchComics(o.value,s.value),d.value=a.value==="all"?e.comics.length:e.filteredComics.length}catch(t){console.error("加载漫画列表失败",t),N.error("加载漫画列表失败")}},h=r(()=>a.value==="all"?p.value:e.filteredComics),y=async(t,l)=>{o.value=t,s.value=l,i()};return V(()=>{i()}),(t,l)=>{const w=F("el-tag");return v(),m("div",M,[l[0]||(l[0]=u("h1",{class:"page-title"},"漫画分类",-1)),u("div",q,[(v(),m(z,null,B(C,n=>g(w,{key:n.id,class:E({active:a.value===n.id}),onClick:G=>_(n.id)},{default:S(()=>[b(P(n.name),1)]),_:2},1032,["class","onClick"])),64))]),g(x,{comics:h.value,loading:f.value,pagination:!0,total:d.value,"default-page":o.value,"default-page-size":s.value,onPageChange:y},null,8,["comics","loading","total","default-page","default-page-size"])])}}}),H=I(A,[["__scopeId","data-v-7fbd03f4"]]);export{H as default};
