import{u as V}from"./comic-BkiLk8d2.js";import{C as k}from"./ComicGrid-apJGY1A-.js";import{d as y,r as n,c,o as x,b as L,e as _,g as o,h as s,i as w,I as N,q as r,m as z,_ as B}from"./index-CD-uQSen.js";const F={class:"latest-view"},M={class:"time-filter"},P=y({__name:"LatestView",setup(S){const u=V(),i=n(1),m=n(24),p=n(0),C=c(()=>u.loading),d=c(()=>u.latestComics),l=n("all"),g=c(()=>{if(l.value==="all")return d.value;const t=new Date;let e;switch(l.value){case"today":e=new Date(t.setHours(0,0,0,0));break;case"week":e=new Date(t.setDate(t.getDate()-t.getDay())),e.setHours(0,0,0,0);break;case"month":e=new Date(t.getFullYear(),t.getMonth(),1);break;default:return d.value}return d.value.filter(a=>new Date(a.updateTime)>=e)}),b=t=>{l.value=t,i.value=1},D=async(t,e)=>{i.value=t,m.value=e,f()},f=async()=>{try{await u.fetchLatestComics(50),p.value=g.value.length}catch(t){console.error("加载最新漫画失败",t),N.error("加载最新漫画失败")}};return x(()=>{f()}),(t,e)=>{const a=w("el-radio-button"),v=w("el-radio-group");return z(),L("div",F,[e[5]||(e[5]=_("h1",{class:"page-title"},"最新更新",-1)),_("div",M,[o(v,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=h=>l.value=h),onChange:b},{default:s(()=>[o(a,{label:"all"},{default:s(()=>e[1]||(e[1]=[r("全部")])),_:1}),o(a,{label:"today"},{default:s(()=>e[2]||(e[2]=[r("今天")])),_:1}),o(a,{label:"week"},{default:s(()=>e[3]||(e[3]=[r("本周")])),_:1}),o(a,{label:"month"},{default:s(()=>e[4]||(e[4]=[r("本月")])),_:1})]),_:1},8,["modelValue"])]),o(k,{comics:g.value,loading:C.value,pagination:!0,total:p.value,"default-page":i.value,"default-page-size":m.value,onPageChange:D},null,8,["comics","loading","total","default-page","default-page-size"])])}}}),I=B(P,[["__scopeId","data-v-61f62153"]]);export{I as default};
